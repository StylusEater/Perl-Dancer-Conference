#!/usr/bin/env perl

use warnings;
use strict;

use Dancer ':script';
use Dancer::Plugin::Interchange6;

set logger        => 'console';
set logger_format => '%m';

my $schema = shop_schema;

shop_schema->deploy( { add_drop_table => 1 } );

# username/email, forename, surname, nick, pause id, company, city, state iso,
# country iso, bio
my @users = (
    [
        'xsawyerx@gmail.com', 'Sawyer', 'X', 'SawyerX', 'XSAWYERX',
        'Booking.com', 'Amsterdam', undef, 'NL',
"One of the Dancer authors and a great speaker, SawyerX is joining us this year in Vienna. Along with Andrew Solomon he is giving a Dancer training on the first day of the conference, along with a talk on one of the conference days. Sawyer is very easy to listen to, and this is an exceptional opportunity to attend training from the guy who not only wrote Dancer, but is also really good at explaining things."
    ],
    [
        'andrew@geekuni.com', 'Andrew', 'Solomon', 'illy', 'ILLY',
        'Geekuni',            'London', undef,     'GB',
"Software developer and project leader with over 15 years experience. Applications include algebraic and optimisation algorithms, web services and virtual machines in Perl, Java and C within a Unix environment. Managing projects using both in-house and contract developers.

        Specialties:Perl, E-Learning, Optimization, Mathematics, Computer Science, mod_perl, lecturer, linux, dbi, javascript, OO Design, MySQL, PostgreSQL "
    ],
    [
        'andrew@pullingshots.ca', 'Andrew', 'Baerg', undef, 'BAERGAJ',
        'SOLE.com', 'Vancouver', 'BC', 'CA',
        "Andrew graduated from the University of Calgary in 2001 with a Comp Sci degree.He was short after hired on to develop a webstore for Edge Marketing (dba SOLE) in 2001 and went on to open source all of their internal systems. He is currently serving as their CHO (chief hackining officer)."
    ],
    [
        'racke@linuxia.de', 'Stefan',   'Hornburg', 'Racke', 'HORNBURG',
        'Linuxia',          'Hannover', undef,      'DE',
        "Stefan is doing E-Commerce and web app development for more than 15 years. He is also volunteering as Debian maintainer. He has written a bunch of Perl modules and as a true open source enthusiast often commits to community."
    ],
    [
        'peter@sysnix.com', 'Peter', 'Mottram', 'SysPete', 'SYSPETE',
        'Sysnix',           'Qormi', undef,     'MT',
        "e-commerce and Perl developer, Linux, network, firewall and security consultant, Peter has lived and worked in several coutries across Europe since his first IT job as sysadmin at Nokia some 25 years ago. Has since worked for mobile and fixed telcos and spent the last 15 years building Internet-connected platforms for the oil and gas industry, truck telematics, massive online games and many other applications"
    ],
    [
        'jure.kodzoman@informastudio.com', 'Jure',
        'Kodzoman',                        undef, undef,
        'Informa Studio Ltd.',             'Split',
        undef,                             'HR',
        "Jure works as Head of Development at Informa Studio. He has more than 10 years of active experience in E-Commerce working with different types of clients, from small webshops to large corporations. Strong interest in improving usability and effectiveness of online shopping."
    ],
    [
        'grega.pompe@informa.si', 'Grega',
        'Pompe',                  undef, undef,
        'Informa Studio Ltd.',    'Ljubljana',
        undef,                    'SI',
        "Grega started out as a Python developer but due to circumstances moved to Perl. He is one of the major contributors to TableEditor and Storemail projects as well as a huge DBIx::Class fan."
    ],
    [
        'sbatschelet@mac.com', 'Sam',
        'Batschelet',          'hexfusion', undef,
        'West Branch Angler',  'New York',
        'NY',                  'US',
        "Sam is CTO of West Branch Angler fishing resort, taking care of tech department of the resort as well as running their fly fishing gear online store."
    ],
);
# username/email, forename, surname, nick, pause id, company, city, state, country, bio
foreach my $row (@users) {
    my $state = shop_state( { state_iso_code => $row->[7] } );
    my $user = shop_user->create(
        {
            username   => $row->[0],
            email      => $row->[0],
            first_name => $row->[1],
            last_name  => $row->[2],
            nickname   => $row->[3],
            password   => 'ietoYoo9Ue',
            addresses  => [
                {
                    type             => 'primary',
                    company          => $row->[5],
                    city             => $row->[6],
                    states_id        => $state ? $state->id : undef,
                    country_iso_code => $row->[8],
                }
            ],
        }
    );
}

shop_product->create(
    {
        sku => '2015CONF',
        price => 159,
        name => 'Conference Only',
        description => "Valid for 2 conference days

        21 and 22 of October

        Entrance to all talks

        Includes social event

        Includes free T-Shirt"
    }
);
shop_product->create(
    {
        sku => '2015FULL',
        price => 249,
        name => 'Conference + Training',
        description => "Four Day Full Access

        21 and 22 of October

        Entrance to all talks

        Includes social event

        Includes free T-Shirt"
    }
);

